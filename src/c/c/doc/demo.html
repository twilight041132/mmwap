<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8 "/>  
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>WEB调起客户端下载DEMO</title>
		<script src="../mmapp.js" type="text/javascript" charset="utf-8"></script>
		<style type="text/css">
		*{margin:0;padding:0}
		body{
			background: #F4F4F4;
			font-size:16px;
		}
		.app{
			margin: 2%;
		}
		.app-item{
			display: -webkit-box;
			-webkit-box-pack: justify;
			-webkit-box-align: center;
			background: #FFFFFF;
			padding:10px;
			border:1px solid #E2E2E2;
		}
		.app-item+.app-item{
			margin-top: 2%;
		}
		.app-detail{
			display: -webkit-box;
			-webkit-box-flex: 1;
		}
		.app-detail img{
			width:60px;
			margin-right: 10px;
		}
		.app-starBar{height:12px;width:60px;background:url(http://a.10086.cn/mmfs/image/27806/27806474.png);background-size:12px 12px;}
		.app-starBar span{vertical-align:top;display:inline-block;height:12px;background:url(http://a.10086.cn/mmfs/image/27806/27806475.png);background-size:12px 12px;}
		.app-btn{
			border:1px solid #E2E2E2;
			padding:10px 10px;
			margin:-1px;
		}
		a:active{
			border:1px solid #7DC888;
			margin:-1px;
		}
		a{
			cursor: pointer;
			text-decoration: none;
			color:#000000
		}
		.app-item-check{
			display: -webkit-box;
			-webkit-box-orient: vertical;
			-webkit-box-pack: center;
			padding-right: 10px;
		}
		.foot{
			position:fixed;
			bottom: 0;
			left:0;
			width: 100%;
			display: -webkit-box;
			-webkit-box-align: center;
			-webkit-box-pack: justify;
			background: #FFFFFF;
			padding:5px;
		}
		.select-all,.cancel-all{
			font-weight: bold;
			border: 1px solid #E2E2E2;
			line-height: 1.6;
			padding:5px 10px;
		}
		.select-all:after{
			content:'全选'
		}
		.cancel-all:after{
			content:'取消'
		}
		.batchdownload{
			padding:5px 10px;
			margin-right: 10px;
			border: 1px solid #E2E2E2;
		}
		a.batchdownload:active{
			padding:5px 10px;
			margin-right: 10px;
			border:1px solid #7DC888;
		}
	</style>
</head>
<body>
	<div id='msg'></div>
	<div class='app'>
		<div class='app-item'>
			<div class='app-item-check'>
				<input type="checkbox" name="dl"  value="300008347715" />
			</div>
			<a class='app-detail' href="#" onclick="mm.detail(300008347715)">
				<div><img src="http://u5.mm-img.mmarket.com:80/rs/res2/21/2015/01/05/a452/112/41112452/logo1120x1200456076298-png8.png"/></div>
				<div>
					<div class="name">
				       	中央纪委网站
				      </div> 
				      <div class="app-starBar">
				       <span style="width:80%"></span>
				      </div> 
				      <div class="info">
				       	新闻资讯
				       <span>8.16MB</span>
				      </div> 
				</div>
			</a>
			<div style="width:4px;"></div>
			<a class='app-btn' href="#" onclick="mm.download(300008347715)">
				下载
			</a>
		</div>
		<div class='app-item'>
			<div class='app-item-check'>
				<input type="checkbox" name="dl"  value="300008347715" />
			</div>
			<a class='app-detail' href="#" onclick="mm.detail(300008490119)">
				<div><img src="http://u5.mm-img.mmarket.com:80/rs/res2/21/2014/12/31/a410/036/41036410/logo1120x1209989506373-png8.png"/></div>
				<div>
					<div class="name">
				       	新华社发布
				      </div> 
				      <div class="app-starBar">
				       <span style="width:80%"></span>
				      </div> 
				      <div class="info">
				       	新闻资讯
				       <span>5.26MB</span>
				      </div> 
				</div>
			</a>
			<div style="width:4px;"></div>
			<a class='app-btn' href="#" onclick="mm.download(300008490119)">
				下载
			</a>
		</div>
		<div class='app-item'>
			<div class='app-item-check'>
				<input type="checkbox" name="dl"  value="300008347715" />
			</div>
			<a class='app-detail' href="#" onclick="mm.detail(300001877083)">
				<div><img src="http://u5.mm-img.mmarket.com:80/rs/res2/21/2014/12/03/a868/396/40396868/logo120x1207590852720-png8.png"/></div>
				<div>
					<div class="name">
				       	手机安全先锋（杀毒先锋）
				      </div> 
				      <div class="app-starBar">
				       <span style="width:80%"></span>
				      </div> 
				      <div class="info">
				       	安全防护
				       <span>8.88MB</span>
				      </div> 
				</div>
			</a>
			<div style="width:4px;"></div>
			<a class='app-btn' href="#" onclick="mm.download(300001877083)">
				下载
			</a>
		</div>
		<div id='msg2'></div>
	</div>
	<div class='foot'>
		<div>
			<a class='select-all' id='selectAll'>
			<input type='checkbox' name='select' id='select' />
			</a>
		</div>
		<div><a class='batchdownload'>批量下载</a></div>
	</div>
</body>
<script type="text/javascript">
	var selectAll = document.querySelector("#selectAll");
	var slt = document.querySelector("#select");
	selectAll.addEventListener("click",function(){
		var check = slt.checked;
		if(check){
			checkAll(false);
			slt.checked=false;
			selectAll.className='select-all';
			
		}else{
			checkAll(true);
			slt.checked=true;
			selectAll.className='cancel-all';
		}
	});
	slt.addEventListener("click",function(){
		var check = slt.checked;
		if(check){
			checkAll(false);
			slt.checked=false;
			
		}else{
			checkAll(true);
			slt.checked=true;
		}
	});
	function checkAll(type){
		var els = document.querySelectorAll(".app-item-check input");
		for(var i=0;i<els.length;i++){
			els[i].checked = type;
		}
	}
	var batchDl = document.querySelector(".batchdownload");
	batchDl.addEventListener("click",function(){
		var els = document.querySelectorAll(".app-item-check input");
		if(els.length>0){
			var items = Array.prototype.slice.call(els,0); 
			var ids = "";
			items.forEach(function(item,index){
				var check = item.checked;
				if(typeof check !='undefined'&&check){
					var value=item.value;
					ids===""?ids=value:ids+="/"+value;
				}
			});
			if(ids===""){
				alert("请选择需要下载的应用");
			}else{
				mm.batchDownload(ids);
			}
		}
	});
	
</script>
</html>