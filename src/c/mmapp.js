!function e(t,n,i){function o(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var p=n[a]={exports:{}};t[a][0].call(p.exports,function(e){var n=t[a][1][e];return o(n?n:e)},p,p.exports,e,t,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){var i=e("./js/main");i.init(window)},{"./js/main":9}],2:[function(e,t,n){var i=e("./Event"),o=e("./Params"),r=e("./Util"),a=e("./Dialog"),s=e("./Config"),c=[].slice,l={act:{b:"batchdownload",dl:"download",d:"detail"},ls:{},init:function(){var e=this;e.setVersionSupport("MM",[510,501,500]),e.setVersionSupport("MMLITE",[200,200,200]),e.setVersionSupport("MMOPEN",[100,100,100])},setVersionSupport:function(e,t){var n=this,i=n.ls[e]||(n.ls[e]={});i[n.act.b]=t[0],i[n.act.dl]=t[1],i[n.act.d]=t[2]},support:function(e){var t=this,n=r.getCookie(o.version),i=r.getCookie(o.version_type),a=!1;if(e&&r.s(n)&&n.length>0){n=parseInt(n,10);var s=t.ls[i][e];s&&n>=s&&(a=!0)}return a},checkVersion:function(e){var t=r.getCookie(o.version),n=!1;return r.s(t)&&t.length>0&&(t=parseInt(t,10),t>e&&(n=!0)),n}},p={ua:navigator.userAgent.toLowerCase(),isChrome:function(){var e=this.ua;return e.match(/360 aphone /i)?!1:"chrome"==e.match(/Chrome/i)},query:function(e){var t="";for(var n in e)t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return t},isWechat:function(){return"micromessenger"==this.ua.match(/MicroMessenger/i)?1:0},isQq:function(){return this.ua.match(/MQQBrowser/i)?1:0},bs:function(){var e="",t=this.ua,n={whatchar:t.match(/MicroMessenger/i)?"微信":"",uc:t.match(/(UCBrowser)|(UCWEB)/i)?"UC浏览器":"",qq:t.match(/MQQBrowser/i)?"QQ浏览器":"",op:t.match(/oupeng/i)?"欧朋浏览器":"",ay:t.match(/MxBrowser/i)?"遨游浏览器":"",lb:t.match(/LieBao/i)?"猎豹浏览器":"",xm:t.match(/MiuiBrowser/i)?"小米浏览器":"",bd:t.match(/baidubrowser/i)?"百度浏览器":"",b360:t.match(/360 aphone/i)?"360浏览器":"",sg:t.match(/sogoumobilebrowser/i)?"搜狗浏览器":""};for(var i in n)if(""!=n[i]){e=n[i];break}return e},longFileNameAccept:function(){var e=!1,t=this.ua,n={qq:t.match(/MQQBrowser/i)?"QQ浏览器":"",ay:t.match(/MxBrowser/i)?"遨游浏览器":"",lb:t.match(/LieBao/i)?"猎豹浏览器":"",bd:t.match(/baidubrowser/i)?"百度浏览器":""};for(var i in n)if(""!=n[i]){e=!0;break}return e},getCurrentBs:function(){var e=this.bs();return""!=e?e:"浏览器"}},d={reqUrl:{index:"mm://index",launch:"mm://launchbrowser?url=",appdetail:"mm://appdetail?requestid=app_info_forward&contentid=",downloadUri:"http://odp.mmarket.com/t.do?requestid=app_order&goodsid=999100008100930100001752138{contentid}&payMode=1",mmrelaapp:"http://zjw.mmarket.com/mmapk/{channelid}/mmarket-999100008100930100001752138{contentid}-180.apk",batchmmrelaapp:"http://zjw.mmarket.com/mmapk/{channelid}/mmarket-{contentid}-180.apk",MM_CONTENT_ID:"300000863435"},reqMethod:{queryapp:"queryapp&appname=",querydownprogress:"querydownprogress&contentid=",download:"download&url=",jump:"jump&url=",batchdownload:"batchdownload&contentids="},run:function(e,t){var n=this;t&&n.isChrome()?n.chrome(e):n.iframe(e)},isChrome:function(){var e=navigator.userAgent.toLowerCase();return e.match(/360 aphone /i)?!1:"chrome"==e.match(/Chrome/i)},downloadApp:function(e){window.location.href=e},chrome:function(e){var t=e.split("://"),n=t[0],e=t[1],i="intent://"+e+"#Intent;scheme="+n+("mm"==n?";package="+o.mmpkg:"")+";end";window.location.href=i},iframe:function(e){var t=document.createElement("iframe");t.style.display="none",t.src=e,document.body.appendChild(t),setTimeout(function(){document.body.removeChild(t)},2e3)},open:function(e,t){var n=this,i=l,r=p,t=t||s.showtitle,a=n.reqUrl,c=n.reqMethod,d=a.launch+encodeURIComponent(e),u=o.getBaseUrl();i.support(i.act.d)?(d=u+c.jump+encodeURIComponent(e)+(t?"&appname="+r.getCurrentBs():""),n.iframe(d)):n.run(d,!0)},batchDownload:function(e){this.download(e,l.act.b)},download:function(e,t){var n=this,i=l,t=t||i.act.dl,r=n.reqUrl,c=n.reqMethod,d=r.appdetail+encodeURIComponent(e),u=o.getBaseUrl();if(i.support(t))switch(t){case i.act.dl:d=u+c.download+encodeURIComponent(r.downloadUri.replace("{contentid}",e)),n.iframe(d);break;case i.act.b:d=u+c.batchdownload+e,n.iframe(d)}else if(i.act.dl===t)n.run(d,!0);else if(i.act.b==t){var m=function(){if(i.support(i.act.d)){var e=u+c.jump+encodeURIComponent(r.appdetail+r.MM_CONTENT_ID)+(s.showtitle?"&appname="+p.getCurrentBs():"");n.iframe(e)}else{var e=r.appdetail+encodeURIComponent(r.MM_CONTENT_ID);n.run(e,!0)}};a.one("dialog.after.show",function(){a.one("dialog.res.save",m)}),a.show({type:"alert",info:s.lowVersionAlert})}},detail:function(e,t){var n=this,i=l,r=p,a=n.reqUrl,t=t||s.showtitle,c=n.reqMethod,d=a.appdetail+encodeURIComponent(e),u=o.getBaseUrl();i.support(i.act.d)?(d=u+c.jump+encodeURIComponent(a.appdetail+e)+(t?"&appname="+r.getCurrentBs():""),n.iframe(d)):n.run(d,!0)},error:function(){var e=this,t=s.onIntent,n=e.reqUrl,o=p,r=o.ua.match(/(UCBrowser)|(UCWEB)/i),l=r||o.isQq()?1:0,d=r?2e3:900,u=c.call(arguments),m=u[0],f=!("open"===m&&!u[2]);if(o.isWechat()){if(f){var v=function(){e.downloadApp(s.wetchartmm)};if(s.useGuide){a.one("dialog.after.show",function(){a.one("dialog.res.save",v)});var h="detail"===u[0]||"open"===u[0]?"detail":"download";a.show({type:"weixin",flag:h})}else v();i.trigger("server.over.error",m)}}else if(!t&&f)e.downloadmm.apply(e,u);else{var g=Date.now(),w="open"!=m&&"detail"!=m;if("open"===m){var A=u[1];A&&!l?e.iframe(n.launch+encodeURIComponent(A)):e.iframe(n.index)}else if("detail"===m){var b=u[1];b&&!l?e.iframe(n.appdetail+b):e.iframe(n.index)}else e.iframe(n.index);var y=function(){u.unshift("downloadmm"),u.unshift("server.check.start"),i.trigger.apply(i,u)};setTimeout(function(){var t=Date.now();l?y():!g||d+200>t-g?w?y():f&&e.downloadmm.apply(e,u):w&&y()},d)}},downloadmm:function(e){var t=this,n=l,o=p,r=c.call(arguments,1),d=r&&r[0]||"",u=o.bs(),m=o.longFileNameAccept();if(i.trigger("server.over.error",e),s.downloadmm&&e){var f=function(){var t="";switch(e){case"download":t=n.act.dl;break;case"batchDownload":t=n.act.b;break;default:t=n.act.d}return t}(),v=t.getMMUrl(f);if(""==u||!m&&f==n.act.b||f==n.act.d?t.downloadApp(v.replace("{contentid}","")):t.downloadApp(v.replace("{contentid}",d)),s.useGuide){var h=f==n.act.d||"open"==f?"detail":"download",g=c.call(arguments);g.unshift("server.check.start");var w=function(){i.trigger.apply(i,g)};setTimeout(function(){a.one("dialog.after.show",function(){a.one("dialog.res.save",w)}),a.show({type:"guid",flag:h})},1e3)}}},getMMUrl:function(e){var t=this,n=l,i=t.reqUrl;return"undefined"!=typeof e&&e==n.act.b?i.batchmmrelaapp.replace("{channelid}",s.channelid):i.mmrelaapp.replace("{channelid}",s.channelid)},none:function(){}};l.init(),t.exports={execute:function(e){var t=d;return t[e]&&t[e].apply(t,c.call(arguments,1))}}},{"./Config":3,"./Dialog":4,"./Event":5,"./Params":6,"./Util":8}],3:[function(e,t,n){function i(e){return{version_reg:new RegExp("^("+e+")[0-9]+(\\.[0-9]*|$)?(\\.[0-9]*|$)?","i"),version_prefix:new RegExp("^("+e+")","i")}}var o="MMLite|MMOpen|MM",r=i(o);t.exports={batchMaxApps:"15",maxAlert:"批量下载超过最大下载数15个,请重新选择",lowVersionAlert:"抱歉,您的MM版本过低无法支持该功能,请升级新版客户端",showtitle:!0,channelid:"5410093632",onIntent:!0,useGuide:1,wetchartmm:"http://a.app.qq.com/o/simple.jsp?pkgname=com.aspire.mm",callOnlyVersion:function(e){var t=this;t.onIntent=!1;var n=e.split("|");n.length;n.sort(function(e,t){return t.length-e.length}),e=n.length>0?n.join("|"):n[0];var o=i(e);t.version_reg=o.version_reg,t.version_prefix=o.version_prefix},version_reg:r.version_reg,version_prefix:r.version_prefix,downloadmm:1}},{}],4:[function(e,t,n){var i=e("./Event"),o=e("./Util"),r={cssloaded:0,el:{},options:{type:"alert",info:"",base:"",flag:"download",css:"mmapp.css"},infos:{guid:{detail:{info:'安装并启动MM商城<span class="__mm-wap-hint-link" id="__mm-wap-success">请点这里</span>即可打开目标页面'},download:{info:'安装并启动MM商场后将自动开始高速下载，如没开始高速下载，<span class="__mm-wap-hint-link" id="__mm-wap-success">请点这里</span>'}},weixin:{detail:{tit:"操作指引",tip:"请按以下步骤操作",second:"回到微信再次点击"},download:{tit:"高速下载指引",tip:"请按以下步骤操作完成高速下载：",second:"回到微信再次点击“高速下载”。"}}},movePrevent:function(e){this.preventDefault(e),this.stopPropagation(e)},set:function(e){var t=this;for(var n in t.options)"undefined"!=typeof e[n]&&(t.options[n]=e[n])},view:function(){var e=this,t="";if("guid"===e.options.type){var n=e.infos.guid[e.options.flag];t='<div class="__mm-wap-hint"><div class="__mm-wap-hint-msg">'+n.info+'</div><div class="__mm-wap-hint-close" id="__mm-wap-close"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAfCAYAAAAfrhY5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjIwMUY5NTEyQUJCMTFFNTg0MTQ5NzUyMzMyNDY2QjEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MjIwMUY5NTIyQUJCMTFFNTg0MTQ5NzUyMzMyNDY2QjEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyMjAxRjk0RjJBQkIxMUU1ODQxNDk3NTIzMzI0NjZCMSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoyMjAxRjk1MDJBQkIxMUU1ODQxNDk3NTIzMzI0NjZCMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpWGpx8AAAEwSURBVHjavJU9DoJAEEZh9Aja0FtZWHACDdaWFl7AwrvY6Q0sNF7AmHgDEwtbDyDUVib6bcImhPAz+zNs8goC4b0lMIRxHAdYa3AGadDhIrABe3ADww6cA3ABYyU/gqc66CBAia9gDrZK/gazDgK0eAIeYEX5CRUwFQwoi9XOUypckAoFVIr1CxcIBtSKq+Q+AxrFdXIfAa3iJrlLAEvcJrcJYIs5cpMAIzFXzgkoixPOf4IMXqK6gCpxxrlh3/Dz0QG3QsDXRmwjrwoIbMSmj724fvmOi5sIbf7nrpPLehKSozhxmYTkKM5cRjE5ip1GMXkQWweQJ7FVAHkUGweQZ7FRAAmI2QEkJGYFkKC4NYCExY0BWn4QFNcFLHtRFKkTdzACCyGxXh9wAi+w+wswAP5lpcbsuZqsAAAAAElFTkSuQmCC" /></div></div>'}else if("weixin"===e.options.type){var n=e.infos.weixin[e.options.flag];t='<div class="__mm-wap-dialog-mask"></div><div class="__mm-wap-dialog" id="__mm-wap-dialog"><div class="__mm-wap-dialog-close " id="__mm-wap-close"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAfCAYAAAAfrhY5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjIwMUY5NTEyQUJCMTFFNTg0MTQ5NzUyMzMyNDY2QjEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MjIwMUY5NTIyQUJCMTFFNTg0MTQ5NzUyMzMyNDY2QjEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyMjAxRjk0RjJBQkIxMUU1ODQxNDk3NTIzMzI0NjZCMSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoyMjAxRjk1MDJBQkIxMUU1ODQxNDk3NTIzMzI0NjZCMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpWGpx8AAAEwSURBVHjavJU9DoJAEEZh9Aja0FtZWHACDdaWFl7AwrvY6Q0sNF7AmHgDEwtbDyDUVib6bcImhPAz+zNs8goC4b0lMIRxHAdYa3AGadDhIrABe3ADww6cA3ABYyU/gqc66CBAia9gDrZK/gazDgK0eAIeYEX5CRUwFQwoi9XOUypckAoFVIr1CxcIBtSKq+Q+AxrFdXIfAa3iJrlLAEvcJrcJYIs5cpMAIzFXzgkoixPOf4IMXqK6gCpxxrlh3/Dz0QG3QsDXRmwjrwoIbMSmj724fvmOi5sIbf7nrpPLehKSozhxmYTkKM5cRjE5ip1GMXkQWweQJ7FVAHkUGweQZ7FRAAmI2QEkJGYFkKC4NYCExY0BWn4QFNcFLHtRFKkTdzACCyGxXh9wAi+w+wswAP5lpcbsuZqsAAAAAElFTkSuQmCC" /></div><div class="__mm-wap-hd">'+n.tit+'</div><div class="__mm-wap-bd"><p class="__mm-wap-guid-tit">'+n.tip+'</p><div class="__mm-wap-guid-step"><p>第<span class="__mm-wap-guid-step-num">1</span>步 </p><p>下载安装MM商场后<span class="__mm-wap-guid-step-hint">启动一次</span>或<span class="__mm-wap-guid-step-hint">打开一次</span></p></div><div class="__mm-wap-guid-step"><p>第<span class="__mm-wap-guid-step-num">2</span>步</p><p>'+n.second+'</p></div></div><div class="__mm-wap-ft"><div class="__mm-wap-btn  " id="__mm-wap-success">前往下载MM商场</div></div></div>'}else t='<div class="__mm-wap-dialog-mask"></div><div class="__mm-wap-dialog" id="__mm-wap-dialog"><div class="__mm-wap-dialog-close " id="__mm-wap-close"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAfCAYAAAAfrhY5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjIwMUY5NTEyQUJCMTFFNTg0MTQ5NzUyMzMyNDY2QjEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MjIwMUY5NTIyQUJCMTFFNTg0MTQ5NzUyMzMyNDY2QjEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyMjAxRjk0RjJBQkIxMUU1ODQxNDk3NTIzMzI0NjZCMSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoyMjAxRjk1MDJBQkIxMUU1ODQxNDk3NTIzMzI0NjZCMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpWGpx8AAAEwSURBVHjavJU9DoJAEEZh9Aja0FtZWHACDdaWFl7AwrvY6Q0sNF7AmHgDEwtbDyDUVib6bcImhPAz+zNs8goC4b0lMIRxHAdYa3AGadDhIrABe3ADww6cA3ABYyU/gqc66CBAia9gDrZK/gazDgK0eAIeYEX5CRUwFQwoi9XOUypckAoFVIr1CxcIBtSKq+Q+AxrFdXIfAa3iJrlLAEvcJrcJYIs5cpMAIzFXzgkoixPOf4IMXqK6gCpxxrlh3/Dz0QG3QsDXRmwjrwoIbMSmj724fvmOi5sIbf7nrpPLehKSozhxmYTkKM5cRjE5ip1GMXkQWweQJ7FVAHkUGweQZ7FRAAmI2QEkJGYFkKC4NYCExY0BWn4QFNcFLHtRFKkTdzACCyGxXh9wAi+w+wswAP5lpcbsuZqsAAAAAElFTkSuQmCC" /></div><div class="__mm-wap-bd"><div class="__mm-wap-bd-info"><p>'+e.options.info+'</p></div></div><div class="__mm-wap-ft"><div class="__mm-wap-btn  " id="__mm-wap-success">确定</div></div></div>';return t},onload:function(e,t){var n=this;e.attachEvent?e.attachEvent("onload",t):setTimeout(function(){n.poll(e,t)},0)},poll:function(e,t){var n=this;if(!t.isCalled){if(/webkit/i.test(navigator.userAgent))e.sheet&&(n.cssloaded=!0);else if(e.sheet)try{e.sheet.cssRules&&(n.cssloaded=!0)}catch(i){1e3===i.code&&(n.cssloaded=!0)}n.cssloaded?setTimeout(function(){t(),t.isCalled=!0},1):setTimeout(function(){n.poll(e,t)},1)}},loadcss:function(e,t){var n=this,i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",e),document.body.appendChild(i),n.onload(i,t)},show:function(e){var t=this;t.destroy(),t.set(e),t.loaded(t.create.bind(t))},create:function(){var e=this,t=e.view(),n=document.createElement("div");n.setAttribute("id","__mm-wap-toast"),n.style.display="none",n.innerHTML=t,e.trigger("dialog.before.show"),document.body.appendChild(n),e.el["__mm-wap-toast"]=[n],e.refresh(),e.addHandle(),e.trigger("dialog.after.show")},refresh:function(){var e=this,t=(e.el["__mm-wap-toast"]||(e.el["__mm-wap-toast"]=[e.query("__mm-wap-toast")]))[0];if(null!=t){t.style.display="block";var n=document.body.scrollTop||document.documentElement.scrollTop;"guid"!=e.options.type&&(t.style.height=Math.max(document.body.scrollHeight,document.body.clientHeight)-1+"px",t.setAttribute("class","__mm-wap-toast-cover"));var i=(document.body.offsetHeight||document.documentElement.offsetHeight,e.query("__mm-wap-dialog"));i&&(i.style.top=parseInt(n+(window.innerHeight-i.offsetHeight)/2,10)+"px",1)}},addHandle:function(){var e=this,t=e.el["__mm-wap-toast"]||(e.el["__mm-wap-toast"]=e.query("__mm-wap-toast"));t.push("touchmove"),t.push(e.movePrevent.bind(e)),e.addEvent.apply(e,t),e.resize=function(t){e.refresh()},e.addEvent(window,"resize",e.resize),e.addEvent(window,"scroll",e.resize);var n=e.el["__mm-wap-success"]||(e.el["__mm-wap-success"]=[e.query("__mm-wap-success")]),i=e.el["__mm-wap-close"]||(e.el["__mm-wap-close"]=[e.query("__mm-wap-close")]);null!=n&&n.length>0&&(n.push("click"),n.push(function(t){return e.preventDefault(t),e.stopPropagation(t),e.trigger("dialog.res.save"),e.destroy(),!1}),e.addEvent.apply(e,n)),null!=i&&i.length>0&&(i.push("click"),i.push(function(t){return e.preventDefault(t),e.stopPropagation(t),this.className+=" active",e.trigger("dialog.res.cancle"),e.destroy(),!1}),e.addEvent.apply(e,i))},loaded:function(e){var t=this,n=t.options;if(t.cssloaded)o.f(e)&&e();else{var i=n.base+n.css;t.loadcss(i,e)}},query:function(e){return document.querySelector?document.querySelector("#"+e):document.getElementById(e)},destroy:function(){var e=this;for(var t in e.el){var n=e.el[t];if(n){if(n[0])continue;"__mm-wap-toast"===t&&(n[0].style.display="none"),e.removeEvent.apply(e,n)}}if(e.removeEvent(window,"resize",e.resize),e.removeEvent(window,"scroll",e.resize),"undefined"!=typeof e.el["__mm-wap-toast"]){var i=e.el["__mm-wap-toast"][0];i&&i.parentNode&&i.parentNode.removeChild(i)}e.el={},e.off("dialog.res")},init:function(e){this.options.base=e},addEvent:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},removeEvent:function(e,t,n){e.addEventListener?e.removeEventListener(t,n,!1):e.attachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},getEvent:function(e){return e?e:window.event},getTarget:function(e){return e.target||e.srcElement},stopPropagation:function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},on:function(){i.on.apply(i,arguments)},off:function(){i.off.apply(i,arguments)},trigger:function(){i.trigger.apply(i,arguments)},one:function(){i.one.apply(i,arguments)}};t.exports=r},{"./Event":5,"./Util":8}],5:[function(e,t,n){function i(e,t,n){(e||"").split(l).forEach(function(e){n(e,t)})}function o(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function r(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function a(e,t,n,i){var a,s;return s=r(t),s.ns&&(a=o(s.ns)),e.filter(function(e){return e&&(!s.e||e.e===s.e)&&(!s.ns||a.test(e.ns))&&(!n||e.cb===n||e.cb._cb===n)&&(!i||e.ctx===i)})}function s(e,t){return this instanceof s?(t&&$.extend(this,t),this.type=e,this):new s(e,t)}var c=[].slice,l=/\s+/,p=function(){return!1},d=function(){return!0};s.prototype={isDefaultPrevented:p,isPropagationStopped:p,preventDefault:function(){this.isDefaultPrevented=d},stopPropagation:function(){this.isPropagationStopped=d}},t.exports={on:function(e,t,n){var o,a=this;return t?(o=this._events||(this._events=[]),i(e,t,function(e,t){var i=r(e);i.cb=t,i.ctx=n,i.ctx2=n||a,i.id=o.length,o.push(i)}),this):this},one:function(e,t,n){var o=this;return t?(i(e,t,function(e,t){var i=function(){return o.off(e,i),t.apply(n||o,arguments)};i._cb=t,o.on(e,i,n)}),this):this},off:function(e,t,n){var o=this._events;return o?e||t||n?(i(e,t,function(e,t){a(o,e,t,n).forEach(function(e){delete o[e.id]})}),this):(this._events=[],this):this},trigger:function(e){var t,n,i,o,r,l=-1;if(!this._events||!e)return this;if("string"==typeof e&&(e=new s(e)),t=c.call(arguments,1),e.args=t,t.unshift(e),n=a(this._events,e.type))for(o=n.length;++l<o;)if((i=e.isPropagationStopped())||!1===(r=n[l]).cb.apply(r.ctx2,t)){i||(e.stopPropagation(),e.preventDefault());break}return this}}},{}],6:[function(e,t,n){var i=e("./Util"),o="http://{adress}:{port}/moversion",r="http://{adress}:{port}/action=",a="wx.mm-img.com",s="127.0.0.1";navigator.userAgent.toLowerCase().match(/MicroMessenger|MQQBrowser/i)?(o=o.replace("{adress}",a),r=r.replace("{adress}",a)):(o=o.replace("{adress}",s),r=r.replace("{adress}",s)),t.exports={versionUrl:o,baseUrl:r,DAEMON:"mmcd",mmpkg:"com.aspire.mm",version:"mmversion",version_type:"mmversiontype",port:"mmport",getBaseUrl:function(){var e=this,t=i.getCookie(e.port);return r.replace("{port}",t)}}},{"./Util":8}],7:[function(e,t,n){function i(e){a(),y=b.call(e.args,1),v||(d.trigger("server.before.check"),o(r))}function o(e){g.forEach(function(t){var n=document.createElement("script");n.type="text/javascript",n.setAttribute("port",t),n.setAttribute("class","__js_load_mm"),n.onload=n.onerror=e,n.src=w.replace("{port}",t)+"?"+Date.now(),document.getElementsByTagName("head")[0].appendChild(n)})}function r(e){if(""===h)if("load"==e.type){var t=e.target;h=t.getAttribute("port"),d.trigger("server.after.check","success",h)}else A++,A==g.length&&d.trigger("server.after.check","error")}function a(){"undefined"!=typeof window.a&&"undefined"==typeof window.a.appname&&(M=window.a)}function s(){p(),v=!0,h="",A=0,m.setCookie(u.port,null),m.setCookie(u.version,null),m.setCookie(u.version_type,null)}function c(e){var t=e.args.slice(1),n=function(){y.unshift("server.check.error"),d.trigger.apply(d,y)};if(p(),v=!1,h="",A=0,"success"===t[0]&&(m.setCookie(u.port,t[1]),"undefined"!=typeof window.a&&"undefined"!=typeof window.a.appname)){var i=l(window.a);if(null===M?delete window.a:window.a=M,i)return y.unshift("server.check.success"),void d.trigger.apply(d,y)}n()}function l(e){var t=e.appname,n=0;if(t&&t.length>0){var i=t.match(f.version_reg);if(i){var o=i[1]||"MM";if(m.setCookie(u.version_type,o.toUpperCase()),i=i[0].replace(f.version_prefix,""),i.length>0){var r=i.replace(/\./g,"");m.setCookie(u.version,r||0),n=1}}}return n}function p(){var e=document.getElementsByClassName("__js_load_mm");if(e.length){var t=b.call(e);t.forEach(function(e){e.onload=e.onerror=null,e.remove&&(e.remove(),1)||e.parentNode&&(e.parentNode.removeChild(e),1)})}}var d=e("./Event"),u=e("./Params"),m=e("./Util"),f=e("./Config"),v=!1,h="",g=[9817,19817,29817,39817,49817,59817],w=u.versionUrl,A=0,b=[].slice,y=[],M=null,I=function(){d.on("server.before.check",s.bind(this)),d.on("server.after.check",c.bind(this)),d.on("server.check.start",i.bind(this))};t.exports={init:I}},{"./Config":3,"./Event":5,"./Params":6,"./Util":8}],8:[function(e,t,n){var i={e:Object.prototype.toString,f:function(e){return"[object Function]"==this.e.call(e)},o:function(e){return"[object Object]"==this.e.call(e)},a:function(e){return"[object Array]"==this.e.call(e)},s:function(e){return"string"==typeof e},each:function(e,t){var n=this;if(n.f(t))if(n.o(e))for(var i in e)t(i,e[i]);else if(e&&e.length>0)for(var o=0;o<e.length;o++)t(e[o],o)},CHATSET:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",encode:function(e){var t=this,n="";if(!isNaN(e))for(var i=parseInt(e,10),o=t.CHATSET,r=o.length;i>0;i=parseInt(i/r,10))n+=o.charAt(parseInt(i%r,10));return n},decode:function(e){if("undefined"==typeof e||0==e.length)return 0;for(var t=this.CHATSET,n=t.length,i=0,o=0;o<e.length;o++){var r=e.charAt(o),a=t.indexOf(r);i+=a*Math.pow(n,o)}return i},setCookie:function(e,t,n){var i=e+"="+encodeURIComponent(t)+";path=/";if(null!=n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3),i+=";expires="+o.toGMTString()}document.cookie=i},getCookie:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?decodeURIComponent(t[2]):null}};t.exports=i},{}],9:[function(e,t,n){function i(e){return{f:"[object Function]"===u.call(e),o:"[object Object]"===u.call(e),a:"[object Array]"===u.call(e)}}function o(e){e.mm={download:function(e){r.trigger("server.check.start","download",e)},detail:function(e){r.trigger("server.check.start","detail",e)},open:function(e,t){void 0===t&&(t=!0),r.trigger("server.check.start","open",e,t)},batchDownload:function(e){var t=this;if("undefined"!=typeof e&&""!=e){var n=new Array;if(a.s(e)){if(!/^[\d\/]*$/.test(e))return;n=e.split("/")}else if(a.a(e)){if(0==e.length)return;n=e}if(n.length>0){var i="",o=0;n.forEach(function(e){e&&/^(\d)*$/.test(e)&&(""===i?i=a.encode(e):i+="-"+a.encode(e),o++)}),o>t.get("batchMaxApps")?l.show({type:"alert",info:t.get("maxAlert")}):""!=i&&r.trigger("server.check.start","batchDownload",i)}}},set:function(e,t){var n,o=p;return e in o&&(n=o[e],i(n).f?o[e](t):o[e]=t),this},get:function(e){var t,n=p;return e in n?(t=n[e],i(t).f&&"callOnlyVersion"===e?{version_reg:p.version_reg,version_prefix:p.version_prefix}:t):void 0},init:function(e){if("undefined"!=typeof e&&a.o(e)){var t=p;for(var n in t)n in e&&(t[n]=e[n])}},error:function(e){if(i(e).f){var t=function(t){var n=d.call(t.args,1);n&&n[0]||"";console.log(n),e.apply(this,arguments)};r.on("server.over.error",t)}}}}var r=e("./Event"),a=e("./Util"),s=e("./Client"),c=e("./ServerManager"),l=e("./Dialog"),p=e("./Config"),d=[].slice,u=Object.prototype.toString;Function.prototype.bind||(Function.prototype.bind=function(e){var t=[].slice,n=t.call(arguments,1),i=this,o=function(){},r=function(){return i.apply(this instanceof o?this:e||{},n.concat(t.call(arguments)))};return o.prototype=i.prototype,r.prototype=new o,r}),c.init(),r.on("server.check.success",function(e){console.log("success");var t=e.args.slice(1),n=t&&t[0]||"";"downloadmm"==n&&t.shift(),s.execute.apply(s,t)}),r.on("server.check.error",function(e){var t=d.call(e.args,1),n=t&&t[0]||"";"downloadmm"!==n&&t.unshift("error"),s.execute.apply(s,t)}),a.each(document.querySelectorAll("script"),function(e){var t=e.src;if(t){var n=t.match(/^(.*)mmapp.js/);n&&l.init(n[1])}}),t.exports={init:o}},{"./Client":2,"./Config":3,"./Dialog":4,"./Event":5,"./ServerManager":7,"./Util":8}]},{},[1]);